const lesson01 = document.querySelector(".lesson01");
const lesson02 = document.querySelector(".lesson02");
const lesson03 = document.querySelector(".lesson03");
const lesson04 = document.querySelector(".lesson04");
const lesson05 = document.querySelector(".lesson05");

const stringChoice = document.querySelector(".lesson-learn__block-str");
const stringChoice2 = document.querySelector(".lesson-learn__block-str2");
const stringChoice3 = document.querySelector(".lesson-learn__block-str3");
const stringChoice4 = document.querySelector(".lesson-learn__block-str4");
const stringChoice5 = document.querySelector(".lesson-learn__block-str5");
const stringChoice6 = document.querySelector(".lesson-learn__block-str6");
const stringChoice7 = document.querySelector(".lesson-learn__block-str7");
const stringChoice8 = document.querySelector(".lesson-learn__block-str8");
const stringChoice9 = document.querySelector(".lesson-learn__block-str9");
const stringChoice10 = document.querySelector(".lesson-learn__block-str10");
const stringChoice11 = document.querySelector(".lesson-learn__block-str11");
const stringChoice12 = document.querySelector(".lesson-learn__block-str12");
const stringChoice13 = document.querySelector(".lesson-learn__block-str13");
const stringChoice14 = document.querySelector(".lesson-learn__block-str14");
const stringChoice15 = document.querySelector(".lesson-learn__block-str15");
const stringChoice16 = document.querySelector(".lesson-learn__block-str16");
const stringChoice17 = document.querySelector(".lesson-learn__block-str17");
const stringChoice18 = document.querySelector(".lesson-learn__block-str18");
const stringChoice19 = document.querySelector(".lesson-learn__block-str19");
const stringChoice20 = document.querySelector(".lesson-learn__block-str20");
const stringChoice21 = document.querySelector(".lesson-learn__block-str21");
const stringChoice22 = document.querySelector(".lesson-learn__block-str22");
const stringChoice23 = document.querySelector(".lesson-learn__block-str23");
const stringChoice24 = document.querySelector(".lesson-learn__block-str24");
const stringChoice25 = document.querySelector(".lesson-learn__block-str25");
const stringChoice26 = document.querySelector(".lesson-learn__block-str26");
const stringChoice27 = document.querySelector(".lesson-learn__block-str27");
const stringChoice28 = document.querySelector(".lesson-learn__block-str28");
const stringChoice29 = document.querySelector(".lesson-learn__block-str29");
const stringChoice30 = document.querySelector(".lesson-learn__block-str30");
const stringChoice31 = document.querySelector(".lesson-learn__block-str31");
const stringChoice32 = document.querySelector(".lesson-learn__block-str32");
const stringChoice33 = document.querySelector(".lesson-learn__block-str33");
const stringChoice34 = document.querySelector(".lesson-learn__block-str34");
const stringChoice35 = document.querySelector(".lesson-learn__block-str35");
const stringChoice36 = document.querySelector(".lesson-learn__block-str36");
const stringChoice37 = document.querySelector(".lesson-learn__block-str37");
const stringChoice38 = document.querySelector(".lesson-learn__block-str38");
const stringChoice39 = document.querySelector(".lesson-learn__block-str39");
const stringChoice40 = document.querySelector(".lesson-learn__block-str40");
const stringChoice41 = document.querySelector(".lesson-learn__block-str41");
const stringChoice42 = document.querySelector(".lesson-learn__block-str42");
const stringChoice43 = document.querySelector(".lesson-learn__block-str43");
const stringChoice44 = document.querySelector(".lesson-learn__block-str44");
const stringChoice45 = document.querySelector(".lesson-learn__block-str45");
const stringChoice46 = document.querySelector(".lesson-learn__block-str46");
const stringChoice47 = document.querySelector(".lesson-learn__block-str47");
const stringChoice48 = document.querySelector(".lesson-learn__block-str48");
const stringChoice49 = document.querySelector(".lesson-learn__block-str49");
const stringChoice50 = document.querySelector(".lesson-learn__block-str50");
const stringChoice51 = document.querySelector(".lesson-learn__block-str51");
const stringChoice52 = document.querySelector(".lesson-learn__block-str52");
const stringChoice53 = document.querySelector(".lesson-learn__block-str53");
const stringChoice54 = document.querySelector(".lesson-learn__block-str54");
const stringChoice55 = document.querySelector(".lesson-learn__block-str55");
const stringChoice56 = document.querySelector(".lesson-learn__block-str56");
const stringChoice57 = document.querySelector(".lesson-learn__block-str57");
const stringChoice58 = document.querySelector(".lesson-learn__block-str58");
const stringChoice59 = document.querySelector(".lesson-learn__block-str59");
const stringChoice60 = document.querySelector(".lesson-learn__block-str60");
const stringChoice61 = document.querySelector(".lesson-learn__block-str61");
const stringChoice62 = document.querySelector(".lesson-learn__block-str62");
const stringChoice63 = document.querySelector(".lesson-learn__block-str63");
const stringChoice64 = document.querySelector(".lesson-learn__block-str64");
const stringChoice65 = document.querySelector(".lesson-learn__block-str65");
const stringChoice66 = document.querySelector(".lesson-learn__block-str66");
const stringChoice67 = document.querySelector(".lesson-learn__block-str67");
const stringChoice68 = document.querySelector(".lesson-learn__block-str68");
const stringChoice69 = document.querySelector(".lesson-learn__block-str69");
const stringChoice70 = document.querySelector(".lesson-learn__block-str70");
const stringChoice71 = document.querySelector(".lesson-learn__block-str71");
const stringChoice72 = document.querySelector(".lesson-learn__block-str72");
const stringChoice73 = document.querySelector(".lesson-learn__block-str73");
const stringChoice74 = document.querySelector(".lesson-learn__block-str74");
const stringChoice75 = document.querySelector(".lesson-learn__block-str75");
const stringChoice76 = document.querySelector(".lesson-learn__block-str76");
const stringChoice77 = document.querySelector(".lesson-learn__block-str77");
const stringChoice78 = document.querySelector(".lesson-learn__block-str78");
const stringChoice79 = document.querySelector(".lesson-learn__block-str79");
const stringChoice80 = document.querySelector(".lesson-learn__block-str80");
const stringChoice81 = document.querySelector(".lesson-learn__block-str81");
const stringChoice82 = document.querySelector(".lesson-learn__block-str82");
const stringChoice83 = document.querySelector(".lesson-learn__block-str83");
const stringChoice84 = document.querySelector(".lesson-learn__block-str84");
const stringChoice85 = document.querySelector(".lesson-learn__block-str85");
const stringChoice86 = document.querySelector(".lesson-learn__block-str86");
const stringChoice87 = document.querySelector(".lesson-learn__block-str87");

const checkPhrase = document.querySelector(".lesson-learn__check");
const checkPhrase2 = document.querySelector(".lesson-learn__check2");
const checkPhrase3 = document.querySelector(".lesson-learn__check3");
const checkPhrase4 = document.querySelector(".lesson-learn__check4");
const checkPhrase5 = document.querySelector(".lesson-learn__check5");

const nextBtn = document.querySelector(".lesson-learn__next");
const nextBtn2 = document.querySelector(".lesson-learn__next2");
const nextBtn3 = document.querySelector(".lesson-learn__next3");
const nextBtn4 = document.querySelector(".lesson-learn__next4");
const nextBtn5 = document.querySelector(".lesson-learn__next5");

const answerRightOrNot = document.querySelector(".lesson-learn__box-answer");
const answerRightOrNot2 = document.querySelector(".lesson-learn__box-answer2");
const answerRightOrNot3 = document.querySelector(".lesson-learn__box-answer3");
const answerRightOrNot4 = document.querySelector(".lesson-learn__box-answer4");
const answerRightOrNot5 = document.querySelector(".lesson-learn__box-answer5");

const boxLessonsStrings = document.querySelector(
  ".lesson-learn__block-strings"
);
const boxLessonsStrings2 = document.querySelector(
  ".lesson-learn__block-strings2"
);
const boxLessonsStrings3 = document.querySelector(
  ".lesson-learn__block-strings3"
);
const boxLessonsStrings4 = document.querySelector(
  ".lesson-learn__block-strings4"
);
const boxLessonsStrings5 = document.querySelector(
  ".lesson-learn__block-strings5"
);

const lessonBoxStringsAnswer1 = document.querySelector(
  ".lesson-learn__block-strings-answer1"
);
const lessonBoxStringsAnswer2 = document.querySelector(
  ".lesson-learn__block-strings-answer2"
);
const lessonBoxStringsAnswer3 = document.querySelector(
  ".lesson-learn__block-strings-answer3"
);
const lessonBoxStringsAnswer4 = document.querySelector(
  ".lesson-learn__block-strings-answer4"
);
const lessonBoxStringsAnswer5 = document.querySelector(
  ".lesson-learn__block-strings-answer5"
);

const audioItem = document.querySelector(".lesson-learn__audio");
const audioItem2 = document.querySelector(".lesson-learn__audio2");
const audioItem3 = document.querySelector(".lesson-learn__audio3");
const audioItem4 = document.querySelector(".lesson-learn__audio4");
const audioItem5 = document.querySelector(".lesson-learn__audio5");
const audioItem6 = document.querySelector(".lesson-learn__audio6");
const audioItem7 = document.querySelector(".lesson-learn__audio7");
const audioItem8 = document.querySelector(".lesson-learn__audio8");
const audioItem9 = document.querySelector(".lesson-learn__audio9");
const audioItem10 = document.querySelector(".lesson-learn__audio10");

const stringsArray = [
  stringChoice,
  stringChoice2,
  stringChoice3,
  stringChoice4,
  stringChoice5,
  stringChoice6,
  stringChoice7,
  stringChoice8,
];
const stringsArray2 = [
  stringChoice9,
  stringChoice10,
  stringChoice11,
  stringChoice12,
  stringChoice13,
  stringChoice14,
  stringChoice15,
];
const stringsArray3 = [
  stringChoice16,
  stringChoice17,
  stringChoice18,
  stringChoice19,
  stringChoice20,
  stringChoice21,
  stringChoice22,
];
const stringsArray4 = [  
  stringChoice23,
  stringChoice24,
  stringChoice25,
  stringChoice26,
  stringChoice27,
  stringChoice28,
  stringChoice29,
  stringChoice30,
];
const stringsArray5 = [  
  stringChoice31,
  stringChoice32,
  stringChoice33,
  stringChoice34,
  stringChoice35,
  stringChoice36,
  stringChoice37,
  stringChoice38,
];

const stringsArrays = [
  stringsArray,
  stringsArray2,
  stringsArray3,
  stringsArray4,
  stringsArray5,
];

const boxLessonsStringsArray = [
  boxLessonsStrings,
  boxLessonsStrings2,
  boxLessonsStrings3,
  boxLessonsStrings4,
  boxLessonsStrings5,
];

const lessonBoxStringsAnswersArray = [
  lessonBoxStringsAnswer1,
  lessonBoxStringsAnswer2,
  lessonBoxStringsAnswer3,
  lessonBoxStringsAnswer4,
  lessonBoxStringsAnswer5,
];

const audio01 = new Audio("audio14/i_really_love_sport.wav");
const audio02 = new Audio("audio14/i_like_music.wav");
const audio03 = new Audio("audio14/they_drink_coffee.wav");
const audio04 = new Audio("audio14/i_want_more_exercises.wav");
const audio05 = new Audio("audio14/i_see_that_student.wav");

const audioArray = [audio01, audio02, audio03, audio04, audio05];

const answersArray = [
["Я действительно люблю спорт", "Я спорт действительно люблю"],
["Мне нравится музыка", "Мне нравится музыка"],
["Они пьют кофе", "Они кофе пьют"],
["Я хочу больше упражнений", "Я хочу больше упражнений"],
["Я вижу того студента", "Я того студента вижу"]
];

let rightAnswers = 0;

let joinedText;

let beginner03 = JSON.parse(localStorage.getItem("beginner03"));

audioItem.addEventListener("click", function () {
  listenAudio(audio01);
});
audioItem2.addEventListener("click", function () {
  listenAudio(audio02);
});
audioItem3.addEventListener("click", function () {
  listenAudio(audio03);
});
audioItem4.addEventListener("click", function () {
  listenAudio(audio04);
});
audioItem5.addEventListener("click", function () {
  listenAudio(audio05);
});

function listenAudio(audioItem) {
  audioItem.play();
}
audio01.play();

for (let i = 0; i < stringsArrays.length; i++) {
  const stringsArray = stringsArrays[i];
  const boxLessonsStrings = boxLessonsStringsArray[i];
  const lessonBoxStringsAnswer = lessonBoxStringsAnswersArray[i];

  stringsArray.forEach((stringChoice) => {
    stringChoice.addEventListener("click", function () {
      pasteInPhrase(stringChoice, boxLessonsStrings, lessonBoxStringsAnswer);
    });
  });
}

function pasteInPhrase(
  stringChoice,
  boxLessonsStrings,
  lessonBoxStringsAnswer
) {
  if (stringChoice.classList.contains("str__answer")) {
    boxLessonsStrings.appendChild(stringChoice);
    stringChoice.classList.remove("str__answer");
  } else {
    lessonBoxStringsAnswer.appendChild(stringChoice);
    stringChoice.classList.add("str__answer");
  }
}

function checkPhrases(
  lessonBoxStringsAnswer,
  lessonCheck,
  index,
  answerRightOrNot,
  nextLesson,
  audio
) {
  const divElements = document.querySelectorAll(
    `.lesson-learn__block-strings-answer${
      index + 1
    } [class^="lesson-learn__block-str"]`
  );
  const texts = Array.from(divElements).map((element) => element.textContent);
  joinedText = texts.join(" ");

  if (lessonBoxStringsAnswer.textContent.length > 0) {
    if (
      joinedText === answersArray[index][0] ||
      joinedText === answersArray[index][1]
    ) {
      lessonCheck.style.display = "none";
      nextLesson.style.display = "block";
      answerRightOrNot.style.display = "flex";
      answerRightOrNot.classList.add("lesson-learn__box-answer__correct");
      answerRightOrNot.textContent = "Правильно!";
      rightAnswers++;
    } else {
      lessonCheck.style.display = "none";
      nextLesson.style.display = "block";
      answerRightOrNot.style.display = "flex";
      answerRightOrNot.classList.add("lesson-learn__box-answer__incorrect");
      answerRightOrNot.textContent = `Правильный ответ:\n ${answersArray[index][0]}`;
    }
  }
}

function lessonNext(lesson1, lesson2, audio) {
  lesson1.style.display = "none";
  lesson2.style.display = "flex";
  audio.play();
}

checkPhrase.addEventListener("click", function () {
  checkPhrases(lessonBoxStringsAnswer1, checkPhrase, 0, answerRightOrNot, nextBtn);
});

nextBtn.addEventListener("click", function () {
  lessonNext(lesson01, lesson02, audio02);
});

checkPhrase2.addEventListener("click", function () {
  checkPhrases(
    lessonBoxStringsAnswer2,
    checkPhrase2,
    1,
    answerRightOrNot2,
    nextBtn2
  );
});

nextBtn2.addEventListener("click", function () {
  lessonNext(lesson02, lesson03, audio03);
});

checkPhrase3.addEventListener("click", function () {
  checkPhrases(
    lessonBoxStringsAnswer3,
    checkPhrase3,
    2,
    answerRightOrNot3,
    nextBtn3
  );
});

nextBtn3.addEventListener("click", function () {
  lessonNext(lesson03, lesson04, audio04);
});

checkPhrase4.addEventListener("click", function () {
  checkPhrases(
    lessonBoxStringsAnswer4,
    checkPhrase4,
    3,
    answerRightOrNot4,
    nextBtn4
  );
});

nextBtn4.addEventListener("click", function () {
  lessonNext(lesson04, lesson05, audio05);
});

checkPhrase5.addEventListener("click", function () {
  checkPhrases(
    lessonBoxStringsAnswer5,
    checkPhrase5,
    4,
    answerRightOrNot5,
    nextBtn5,
  );
  if (rightAnswers === 5) {
    if (beginner03.length === 13) {
      beginner03.push(14);
      saveToLocalStorage();
    }
  }
});

const saveToLocalStorage = function () {
  localStorage.setItem("beginner03", JSON.stringify(beginner03));
};
