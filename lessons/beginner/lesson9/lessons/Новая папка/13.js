const lesson01 = document.querySelector(".lesson01");
const lesson02 = document.querySelector(".lesson02");
const lesson03 = document.querySelector(".lesson03");
const lesson04 = document.querySelector(".lesson04");
const lesson05 = document.querySelector(".lesson05");
const lesson06 = document.querySelector(".lesson06");
const lesson07 = document.querySelector(".lesson07");
const lesson08 = document.querySelector(".lesson08");
const lesson09 = document.querySelector(".lesson09");
const lesson10 = document.querySelector(".lesson10");

const stringChoice = document.querySelector(".lesson-learn__block-str");
const stringChoice2 = document.querySelector(".lesson-learn__block-str2");
const stringChoice3 = document.querySelector(".lesson-learn__block-str3");
const stringChoice4 = document.querySelector(".lesson-learn__block-str4");
const stringChoice5 = document.querySelector(".lesson-learn__block-str5");
const stringChoice6 = document.querySelector(".lesson-learn__block-str6");
const stringChoice7 = document.querySelector(".lesson-learn__block-str7");
const stringChoice8 = document.querySelector(".lesson-learn__block-str8");
const stringChoice9 = document.querySelector(".lesson-learn__block-str9");
const stringChoice10 = document.querySelector(".lesson-learn__block-str10");
const stringChoice11 = document.querySelector(".lesson-learn__block-str11");
const stringChoice12 = document.querySelector(".lesson-learn__block-str12");
const stringChoice13 = document.querySelector(".lesson-learn__block-str13");
const stringChoice14 = document.querySelector(".lesson-learn__block-str14");
const stringChoice15 = document.querySelector(".lesson-learn__block-str15");
const stringChoice16 = document.querySelector(".lesson-learn__block-str16");
const stringChoice17 = document.querySelector(".lesson-learn__block-str17");
const stringChoice18 = document.querySelector(".lesson-learn__block-str18");
const stringChoice19 = document.querySelector(".lesson-learn__block-str19");
const stringChoice20 = document.querySelector(".lesson-learn__block-str20");
const stringChoice21 = document.querySelector(".lesson-learn__block-str21");
const stringChoice22 = document.querySelector(".lesson-learn__block-str22");
const stringChoice23 = document.querySelector(".lesson-learn__block-str23");
const stringChoice24 = document.querySelector(".lesson-learn__block-str24");
const stringChoice25 = document.querySelector(".lesson-learn__block-str25");
const stringChoice26 = document.querySelector(".lesson-learn__block-str26");
const stringChoice27 = document.querySelector(".lesson-learn__block-str27");
const stringChoice28 = document.querySelector(".lesson-learn__block-str28");
const stringChoice29 = document.querySelector(".lesson-learn__block-str29");
const stringChoice30 = document.querySelector(".lesson-learn__block-str30");
const stringChoice31 = document.querySelector(".lesson-learn__block-str31");
const stringChoice32 = document.querySelector(".lesson-learn__block-str32");
const stringChoice33 = document.querySelector(".lesson-learn__block-str33");
const stringChoice34 = document.querySelector(".lesson-learn__block-str34");
const stringChoice35 = document.querySelector(".lesson-learn__block-str35");
const stringChoice36 = document.querySelector(".lesson-learn__block-str36");
const stringChoice37 = document.querySelector(".lesson-learn__block-str37");
const stringChoice38 = document.querySelector(".lesson-learn__block-str38");
const stringChoice39 = document.querySelector(".lesson-learn__block-str39");
const stringChoice40 = document.querySelector(".lesson-learn__block-str40");
const stringChoice41 = document.querySelector(".lesson-learn__block-str41");
const stringChoice42 = document.querySelector(".lesson-learn__block-str42");
const stringChoice43 = document.querySelector(".lesson-learn__block-str43");
const stringChoice44 = document.querySelector(".lesson-learn__block-str44");
const stringChoice45 = document.querySelector(".lesson-learn__block-str45");
const stringChoice46 = document.querySelector(".lesson-learn__block-str46");
const stringChoice47 = document.querySelector(".lesson-learn__block-str47");
const stringChoice48 = document.querySelector(".lesson-learn__block-str48");
const stringChoice49 = document.querySelector(".lesson-learn__block-str49");
const stringChoice50 = document.querySelector(".lesson-learn__block-str50");
const stringChoice51 = document.querySelector(".lesson-learn__block-str51");
const stringChoice52 = document.querySelector(".lesson-learn__block-str52");
const stringChoice53 = document.querySelector(".lesson-learn__block-str53");
const stringChoice54 = document.querySelector(".lesson-learn__block-str54");
const stringChoice55 = document.querySelector(".lesson-learn__block-str55");
const stringChoice56 = document.querySelector(".lesson-learn__block-str56");
const stringChoice57 = document.querySelector(".lesson-learn__block-str57");
const stringChoice58 = document.querySelector(".lesson-learn__block-str58");
const stringChoice59 = document.querySelector(".lesson-learn__block-str59");
const stringChoice60 = document.querySelector(".lesson-learn__block-str60");
const stringChoice61 = document.querySelector(".lesson-learn__block-str61");
const stringChoice62 = document.querySelector(".lesson-learn__block-str62");
const stringChoice63 = document.querySelector(".lesson-learn__block-str63");
const stringChoice64 = document.querySelector(".lesson-learn__block-str64");
const stringChoice65 = document.querySelector(".lesson-learn__block-str65");
const stringChoice66 = document.querySelector(".lesson-learn__block-str66");
const stringChoice67 = document.querySelector(".lesson-learn__block-str67");
const stringChoice68 = document.querySelector(".lesson-learn__block-str68");
const stringChoice69 = document.querySelector(".lesson-learn__block-str69");
const stringChoice70 = document.querySelector(".lesson-learn__block-str70");
const stringChoice71 = document.querySelector(".lesson-learn__block-str71");
const stringChoice72 = document.querySelector(".lesson-learn__block-str72");
const stringChoice73 = document.querySelector(".lesson-learn__block-str73");
const stringChoice74 = document.querySelector(".lesson-learn__block-str74");
const stringChoice75 = document.querySelector(".lesson-learn__block-str75");
const stringChoice76 = document.querySelector(".lesson-learn__block-str76");
const stringChoice77 = document.querySelector(".lesson-learn__block-str77");
const stringChoice78 = document.querySelector(".lesson-learn__block-str78");
const stringChoice79 = document.querySelector(".lesson-learn__block-str79");
const stringChoice80 = document.querySelector(".lesson-learn__block-str80");
const stringChoice81 = document.querySelector(".lesson-learn__block-str81");
const stringChoice82 = document.querySelector(".lesson-learn__block-str82");
const stringChoice83 = document.querySelector(".lesson-learn__block-str83");
const stringChoice84 = document.querySelector(".lesson-learn__block-str84");
const stringChoice85 = document.querySelector(".lesson-learn__block-str85");
const stringChoice86 = document.querySelector(".lesson-learn__block-str86");
const stringChoice87 = document.querySelector(".lesson-learn__block-str87");

const checkPhrase = document.querySelector(".lesson-learn__check");
const checkPhrase2 = document.querySelector(".lesson-learn__check2");
const checkPhrase3 = document.querySelector(".lesson-learn__check3");
const checkPhrase4 = document.querySelector(".lesson-learn__check4");
const checkPhrase5 = document.querySelector(".lesson-learn__check5");
const checkPhrase6 = document.querySelector(".lesson-learn__check6");
const checkPhrase7 = document.querySelector(".lesson-learn__check7");
const checkPhrase8 = document.querySelector(".lesson-learn__check8");
const checkPhrase9 = document.querySelector(".lesson-learn__check9");
const checkPhrase10 = document.querySelector(".lesson-learn__check10");

const nextBtn = document.querySelector(".lesson-learn__next");
const nextBtn2 = document.querySelector(".lesson-learn__next2");
const nextBtn3 = document.querySelector(".lesson-learn__next3");
const nextBtn4 = document.querySelector(".lesson-learn__next4");
const nextBtn5 = document.querySelector(".lesson-learn__next5");
const nextBtn6 = document.querySelector(".lesson-learn__next6");
const nextBtn7 = document.querySelector(".lesson-learn__next7");
const nextBtn8 = document.querySelector(".lesson-learn__next8");
const nextBtn9 = document.querySelector(".lesson-learn__next9");
const nextBtn10 = document.querySelector(".lesson-learn__next10");

const answerRightOrNot = document.querySelector(".lesson-learn__box-answer");
const answerRightOrNot2 = document.querySelector(".lesson-learn__box-answer2");
const answerRightOrNot3 = document.querySelector(".lesson-learn__box-answer3");
const answerRightOrNot4 = document.querySelector(".lesson-learn__box-answer4");
const answerRightOrNot5 = document.querySelector(".lesson-learn__box-answer5");
const answerRightOrNot6 = document.querySelector(".lesson-learn__box-answer6");
const answerRightOrNot7 = document.querySelector(".lesson-learn__box-answer7");
const answerRightOrNot8 = document.querySelector(".lesson-learn__box-answer8");
const answerRightOrNot9 = document.querySelector(".lesson-learn__box-answer9");
const answerRightOrNot10 = document.querySelector(
  ".lesson-learn__box-answer10"
);

const boxLessonsStrings = document.querySelector(
  ".lesson-learn__block-strings"
);
const boxLessonsStrings2 = document.querySelector(
  ".lesson-learn__block-strings2"
);
const boxLessonsStrings3 = document.querySelector(
  ".lesson-learn__block-strings3"
);
const boxLessonsStrings4 = document.querySelector(
  ".lesson-learn__block-strings4"
);
const boxLessonsStrings5 = document.querySelector(
  ".lesson-learn__block-strings5"
);
const boxLessonsStrings6 = document.querySelector(
  ".lesson-learn__block-strings6"
);
const boxLessonsStrings7 = document.querySelector(
  ".lesson-learn__block-strings7"
);
const boxLessonsStrings8 = document.querySelector(
  ".lesson-learn__block-strings8"
);
const boxLessonsStrings9 = document.querySelector(
  ".lesson-learn__block-strings9"
);
const boxLessonsStrings10 = document.querySelector(
  ".lesson-learn__block-strings10"
);

const lessonBoxStringsAnswer1 = document.querySelector(
  ".lesson-learn__block-strings-answer1"
);
const lessonBoxStringsAnswer2 = document.querySelector(
  ".lesson-learn__block-strings-answer2"
);
const lessonBoxStringsAnswer3 = document.querySelector(
  ".lesson-learn__block-strings-answer3"
);
const lessonBoxStringsAnswer4 = document.querySelector(
  ".lesson-learn__block-strings-answer4"
);
const lessonBoxStringsAnswer5 = document.querySelector(
  ".lesson-learn__block-strings-answer5"
);
const lessonBoxStringsAnswer6 = document.querySelector(
  ".lesson-learn__block-strings-answer6"
);
const lessonBoxStringsAnswer7 = document.querySelector(
  ".lesson-learn__block-strings-answer7"
);
const lessonBoxStringsAnswer8 = document.querySelector(
  ".lesson-learn__block-strings-answer8"
);
const lessonBoxStringsAnswer9 = document.querySelector(
  ".lesson-learn__block-strings-answer9"
);
const lessonBoxStringsAnswer10 = document.querySelector(
  ".lesson-learn__block-strings-answer10"
);

const stringsArray = [stringChoice, stringChoice2, stringChoice3];
const stringsArray2 = [stringChoice4, stringChoice5, stringChoice6];
const stringsArray3 = [stringChoice7, stringChoice8, stringChoice9];
const stringsArray4 = [stringChoice10, stringChoice11, stringChoice12];
const stringsArray5 = [stringChoice13, stringChoice14, stringChoice15];
const stringsArray6 = [stringChoice16, stringChoice17, stringChoice18];
const stringsArray7 = [stringChoice19, stringChoice20, stringChoice21];
const stringsArray8 = [stringChoice22, stringChoice23, stringChoice24];
const stringsArray9 = [stringChoice25, stringChoice26, stringChoice27];
const stringsArray10 = [stringChoice28, stringChoice29, stringChoice30];

const stringsArrays = [
  stringsArray,
  stringsArray2,
  stringsArray3,
  stringsArray4,
  stringsArray5,
  stringsArray6,
  stringsArray7,
  stringsArray8,
  stringsArray9,
  stringsArray10,
];

const boxLessonsStringsArray = [
  boxLessonsStrings,
  boxLessonsStrings2,
  boxLessonsStrings3,
  boxLessonsStrings4,
  boxLessonsStrings5,
  boxLessonsStrings6,
  boxLessonsStrings7,
  boxLessonsStrings8,
  boxLessonsStrings9,
  boxLessonsStrings10,
];

const lessonBoxStringsAnswersArray = [
  lessonBoxStringsAnswer1,
  lessonBoxStringsAnswer2,
  lessonBoxStringsAnswer3,
  lessonBoxStringsAnswer4,
  lessonBoxStringsAnswer5,
  lessonBoxStringsAnswer6,
  lessonBoxStringsAnswer7,
  lessonBoxStringsAnswer8,
  lessonBoxStringsAnswer9,
  lessonBoxStringsAnswer10,
];

const audio01 = new Audio(
  "audio13/she_doesn't_want_to_have_this_problem_they_don't_want_to_have_these_problems.wav"
);
const audio02 = new Audio(
  "audio13/he_doesn't_want_to_read_this_book_i_don't_want_to_read_these_books.wav"
);
const audio03 = new Audio(
  "audio13/i_don't_feel_happy_because_I_have_bad_results_she_feels_happy_because_she_has_good_results.wav"
);
const audio04 = new Audio(
  "audio13/he_prefers_these_exercises_i_prefer_that_exercise.wav"
);
const audio05 = new Audio("audio13/he_prefers_coffee_i_prefer_tea.wav");
const audio06 = new Audio(
  "audio13/she_doesn't_do_it_because_she_doesn't_have_any_free_time_they_don't_do_it_because_they_have_very_little_free_time.wav"
);
const audio07 = new Audio(
  "audio13/he_wants_to_communicate_with_other_people_who_know_english_i_want_to_communicate_with_another_person_who_knows_english.wav"
);
const audio08 = new Audio(
  "audio13/he_has_good_results_they_have_good_results.wav"
);
const audio09 = new Audio(
  "audio13/he_doesn't_remember_her_name_i_don't_remember_his_name.wav"
);
const audio10 = new Audio(
  "audio13/she_remembers_it_so_well_you_remember_it_very_well.wav"
);

const answersArray = [
  [
    "She doesn't want to have this problem. They don't want to have these problems",
    "They don't want to have these problems. She doesn't want to have this problem",
  ],
  [
    "He doesn't want to read this book. I don't want to read these books",
    "I don't want to read these books. He doesn't want to read this book",
  ],
  [
    "I don't feel happy because I have bad results. She feels happy because she has good results",
    "She feels happy because she has good results. I don't feel happy because I have bad results",
  ],
  [
    "He prefers these exercises. I prefer that exercise",
    "I prefer that exercise. He prefers these exercises",
  ],
  ["He prefers coffee. I prefer tea", "I prefer tea. He prefers coffee"],
  [
    "They don't do it because they have very little free time. She doesn't do it because she doesn't have any free time",
    "She doesn't do it because she doesn't have any free time. They don't do it because they have very little free time",
  ],
  [
    "He wants to communicate with other people who know English. I want to communicate with another person who knows English",
    "I want to communicate with another person who knows English. He wants to communicate with other people who know English",
  ],
  [
    "He has good results. They have good results",
    "They have good results. He has good results",
  ],
  [
    "He doesn't remember her name. I don't remember his name",
    "I don't remember his name. He doesn't remember her name",
  ],
  [
    "She remembers it so well. You remember it very well",
    "You remember it very well. She remembers it so well",
  ],
];

let rightAnswers = 0;

let joinedText;

let beginner08 = JSON.parse(localStorage.getItem("beginner08"));

for (let i = 0; i < stringsArrays.length; i++) {
  const stringsArray = stringsArrays[i];
  const boxLessonsStrings = boxLessonsStringsArray[i];
  const lessonBoxStringsAnswer = lessonBoxStringsAnswersArray[i];

  stringsArray.forEach((stringChoice) => {
    stringChoice.addEventListener("click", function () {
      pasteInPhrase(stringChoice, boxLessonsStrings, lessonBoxStringsAnswer);
    });
  });
}

function pasteInPhrase(
  stringChoice,
  boxLessonsStrings,
  lessonBoxStringsAnswer
) {
  if (stringChoice.classList.contains("str__answer")) {
    boxLessonsStrings.appendChild(stringChoice);
    stringChoice.classList.remove("str__answer");
  } else {
    lessonBoxStringsAnswer.appendChild(stringChoice);
    stringChoice.classList.add("str__answer");
  }
}

function checkPhrases(
  lessonBoxStringsAnswer,
  lessonCheck,
  index,
  answerRightOrNot,
  nextLesson,
  audio
) {
  const divElements = document.querySelectorAll(
    `.lesson-learn__block-strings-answer${
      index + 1
    } [class^="lesson-learn__block-str"]`
  );
  const texts = Array.from(divElements).map((element) => element.textContent);
  joinedText = texts.join(". ");

  if (lessonBoxStringsAnswer.textContent.length > 0) {
    if (
      joinedText === answersArray[index][0] ||
      joinedText === answersArray[index][1]
    ) {
      lessonCheck.style.display = "none";
      nextLesson.style.display = "block";
      answerRightOrNot.style.display = "flex";
      answerRightOrNot.classList.add("lesson-learn__box-answer__correct");
      answerRightOrNot.textContent = "Правильно!";
      audio.play();
      rightAnswers++;
    } else {
      lessonCheck.style.display = "none";
      nextLesson.style.display = "block";
      answerRightOrNot.style.display = "flex";
      answerRightOrNot.classList.add("lesson-learn__box-answer__incorrect");
      answerRightOrNot.textContent = `Правильные ответы:\n ${
        answersArray[index][0].split(".")[0]
      }. ${answersArray[index][0].split(".")[1]}`;
      audio.play();
    }
  }
}

function lessonNext(lesson1, lesson2) {
  lesson1.style.display = "none";
  lesson2.style.display = "flex";
}

checkPhrase.addEventListener("click", function () {
  checkPhrases(
    lessonBoxStringsAnswer1,
    checkPhrase,
    0,
    answerRightOrNot,
    nextBtn,
    audio01
  );
});

nextBtn.addEventListener("click", function () {
  lessonNext(lesson01, lesson02);
});

checkPhrase2.addEventListener("click", function () {
  checkPhrases(
    lessonBoxStringsAnswer2,
    checkPhrase2,
    1,
    answerRightOrNot2,
    nextBtn2,
    audio02
  );
});

nextBtn2.addEventListener("click", function () {
  lessonNext(lesson02, lesson03);
});

checkPhrase3.addEventListener("click", function () {
  checkPhrases(
    lessonBoxStringsAnswer3,
    checkPhrase3,
    2,
    answerRightOrNot3,
    nextBtn3,
    audio03
  );
});

nextBtn3.addEventListener("click", function () {
  lessonNext(lesson03, lesson04);
});

checkPhrase4.addEventListener("click", function () {
  checkPhrases(
    lessonBoxStringsAnswer4,
    checkPhrase4,
    3,
    answerRightOrNot4,
    nextBtn4,
    audio04
  );
});

nextBtn4.addEventListener("click", function () {
  lessonNext(lesson04, lesson05);
});

checkPhrase5.addEventListener("click", function () {
  checkPhrases(
    lessonBoxStringsAnswer5,
    checkPhrase5,
    4,
    answerRightOrNot5,
    nextBtn5,
    audio05
  );
});

nextBtn5.addEventListener("click", function () {
  lessonNext(lesson05, lesson06);
});

checkPhrase6.addEventListener("click", function () {
  checkPhrases(
    lessonBoxStringsAnswer6,
    checkPhrase6,
    5,
    answerRightOrNot6,
    nextBtn6,
    audio06
  );
});

nextBtn6.addEventListener("click", function () {
  lessonNext(lesson06, lesson07);
});

checkPhrase7.addEventListener("click", function () {
  checkPhrases(
    lessonBoxStringsAnswer7,
    checkPhrase7,
    6,
    answerRightOrNot7,
    nextBtn7,
    audio07
  );
});

nextBtn7.addEventListener("click", function () {
  lessonNext(lesson07, lesson08);
});

checkPhrase8.addEventListener("click", function () {
  checkPhrases(
    lessonBoxStringsAnswer8,
    checkPhrase8,
    7,
    answerRightOrNot8,
    nextBtn8,
    audio08
  );
});

nextBtn8.addEventListener("click", function () {
  lessonNext(lesson08, lesson09);
});

checkPhrase9.addEventListener("click", function () {
  checkPhrases(
    lessonBoxStringsAnswer9,
    checkPhrase9,
    8,
    answerRightOrNot9,
    nextBtn9,
    audio09
  );
});

nextBtn9.addEventListener("click", function () {
  lessonNext(lesson09, lesson10);
});

checkPhrase10.addEventListener("click", function () {
  checkPhrases(
    lessonBoxStringsAnswer10,
    checkPhrase10,
    9,
    answerRightOrNot10,
    nextBtn10,
    audio10
  );
  if (rightAnswers === 10) {
    if (beginner08.length === 12) {
      beginner08.push(13);
      saveToLocalStorage();
    }
  }
});

const saveToLocalStorage = function () {
  localStorage.setItem("beginner08", JSON.stringify(beginner08));
};
